
U盘模式
===========================

虚谷号可以通过U盘模式进行编程，不需要接上显示器和鼠标键盘，即可使用。这是虚谷号在教学应用方面的最大特色。

U盘模式也称DAP虚拟磁盘烧录模式，是指虚谷号通过USB线将OTG口和电脑USB口连接后，电脑上将出现一个虚拟的U盘。将Arduino、Python代码复制到U盘的相应目录后，按下RST键，U盘盘符将暂时消失，当再次出现盘符时，程序已经成功执行。

-----------------------------------
应用场景
-----------------------------------

虚谷号是为大班教学设计的。在机房里，如果虚谷号要接上鼠标键盘显示器才能使用，这样的实施条件是非常高的。首先机房中要准备原数量一倍以上的显示器，这几乎无法做到。哪怕两人为一组，这些显示器也没有地方摆放。加一个视频分配器吗？看起来也不可行。其次，机房中还要准备大量的鼠标键盘，这也是做不到的。正是这样的因素，导致树莓派难以在中小学中使用。

.. image:: ../images/02/u-driver01.jpg

可见，不需要接上显示器和鼠标键盘，即可使用虚谷号，这是很重要的教学功能。虚谷号就成了和Arduino、micro:bit和掌控板一样的，即插即用、使用方便的开源硬件了。

**场景1:

大班教学应用。教师不需要改变现有的机房条件和教学习惯，把虚谷号作为掌控板来教学，但是其各方面的性能远超常见的开源硬件。

**场景2:

快速移植应用。当用户在电脑上调试好Python或者Ardunio代码，用U盘模式可以快速将代码移植到虚谷号上。

---------------------------------------------------
通过U盘模式可以做什么？
---------------------------------------------------

- 设置虚谷号的系统参数。

 - 设置虚谷号的Wi-Fi参数，查看IP地址；
 - 设置是否启动Jupyter、SIoT等系统服务。

- 编程。可以给虚谷号编程。

 - 编写Arduino代码；
 - 编写Python代码。


------------------------------------------------
虚谷号U盘模式详解
------------------------------------------------

1、普通python代码

复制标准python代码，虚谷号系统运行代码

工具：官方ide、mPython（虚谷版）、BXY（虚谷版）


2、标准arduino代码

复制标准arduino代码，虚谷号系统将代码写入板载Arduino。

工具：Arduino ide、mixly（虚谷版）、Ardublock


3、驱动arduino的python（基于firmata协议）

复制标准python代码，代码中调用firmata库，虚谷号系统将判断板载Arduino是否已经写入firmata协议（如果没有则自动写入，要延时一定的时间），然后运行代码。

工具：官方ide、mpython（虚谷版）、BXY（虚谷版）


4、同时实现python和Arduino的互动（非firmata协议）


（1）先复制标准arduino代码，虚谷号将代码写入板载Arduino。

（2）再复制标准python代码，虚谷号开始运行Python代码。
